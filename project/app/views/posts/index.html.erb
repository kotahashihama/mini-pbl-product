<%#
  スレッド一覧画面の構造
  URL パス: /posts
%>


<main class="posts-index">
  <h1 class="top">
    <%= link_to 'G1ちゃんねる', '/' %>
  </h1>

<!--G1ちゃんねるの概要を表示-->
  <h1>
    <span class="common">G1ちゃんねる概要</span>
  </h1>
  <div style="line-height:1em;">
    <p><font size="5">まだ開発中です。これから機能を拡充していきます!</font></p>
  </div>
  <br>

<!--スレッドタイトル一覧を表示(仕様は100件表示)-->
  <h2>
    <span class="common">この掲示板の主なスレッド</span>
  </h2>
  <div class="thread-list">
    <div style="margin: 0; padding: 0 0 0 0.5em; border-radius: 0.50em / 0.50em; padding: 0 0 1.0em 0.5em; height: 25em; overflow-y: scroll">
      <% @posts.each do |post| %>
        <p class="thread-detail">
          <%= link_to post.title, post_path(post) %>
        </p>
      <% end %>
    </div>
  </div>
  <b>
    <a href="#new_thread">新規スレッド作成はこちら</a>
  </b>

<!--スレッド一覧を表示(仕様は10件表示)-->
  <h2>
    <span class="common">スレッド一覧</span>
  </h2>

<!--編集中-->
<div class="posts">
      <%# 最初のコメントを表示 %>
      <div class="post">
        <div class="meta">
          <span class="number">
            <%= @comments_first.id %>
          </span>

          <span class="name">
            <%= @comments_first.contributor.empty? ? '名無しさん' : @comments_first.contributor %>
          </span>

          <span class="date">
            <%= @comments_first.created_at.strftime('%Y/%m/%d %H:%M') %>
          </span>
        </div>

        <div class="post-content">
          <span class="escaped"><%= simple_format @comments_first.comment %></p>
        </div>
      </div>

      <%# 最後から3番目のコメントを表示 %>
      <% @comments_last.each do |comment_last| %>
      <div class="post">
        <div class="meta">
          <span class="number">
            <%= comment_last.id %>
          </span>

          <span class="name">
            <%= comment_last.contributor.empty? ? '名無しさん' : comment_last.contributor %>
          </span>

          <span class="date">
            <%= comment_last.created_at.strftime('%Y/%m/%d %H:%M') %>
          </span>
        </div>

        <div class="post-content">
          <span class="escaped"><%= simple_format comment_last.comment %></p>
        </div>
      </div>
    <% end %>
  </div>



<!--新規スレッド作成-->
<!--action部分はまだ出来ていないと思うので""にしてます-->
<%# 投稿フォーム %>
<%= form_with model: @post do |form| %>
  <h2>
    <span class="common">新規スレッド作成</span>
  </h2>
  <div class="mb-5">
    <%= form.submit "新規スレッド作成" %>
    <br>
  </div>
  <div class="mb-5">
    <%= form.label :title, "スレッドタイトル：" %>
    <%= form.text_field :title, :class => 'text-field', :placeholder => 'スレッドタイトル' %>
    <br>
  </div>
  <%= form.fields_for :comments do |comment| %>
    <div class="mb-5">
      <%= comment.label "名前　　　　　　：" %>
      <%= comment.text_field :contributor, :class => 'text-field', :placeholder => '名前' %>
      <br>
    </div>
    <div class="mb-5">
      <%= comment.text_area :comment, :class => 'text-area-field', :placeholder => '内容' %>
    </div>
  <% end %>
<% end %>
</main>
